# Парсинг json

JSON - формат обмена данными. Неплохо подходит для сериализации сложных структур ввиду своей простоты и лаконичности. Является подмножеством синтаксиса JavaScript, хотя независим от самогó языка.

## Введение

В данной статье я уделю синтаксис JSON в конце, а сейчас нужно познакомиться с тем, как выполнять обработку *.json.

К примеру, есть файл `some.json` со следующим содержимым:

```json
{
	"name": "Михаил",
	"firstName": "Краснов",
	"age": 39,
	"hobbies": [
		"linux",
		"electrical engineering"
	],
	"distros": {
		"linux": [
			"debian",
			"fedora",
			"calmira"
		],
		"bsd": [
			"freebsd"
		]
	}
}
```

В данном примере так же я использовал некоторые массивы:

```json
"linux": [],
"bsd": []
```

Подробнее о работе с ними во втором скрипте.

В состав Python входит модуль `json` для кодирования и декодирования файлов одноимённого типа. Для того, чтобы начать работу с функциями из этого модуля, нужно его импортировать:

```python
import json
```

## Теория

### Сериализация и десериализация

Для хранения или передачи данных по сети используется термин под названием *сериализация*. Это трансформация данных в серию байтов для хранения и передачи. Понятно, что *десериализация* - процесс декодирования данных, которые хранятся в JSON.

### Сериализация

Для записи данных в файлы имеется метод `dump()`. Для записи данных не в файлы, а в строку, есть метод `dumps()`.

Для перевода объектов Python в JSON воспользуйтесь таблицей ниже.

| Python               | JSON     |
|----------------------|----------|
| `dict`               | `object` |
| `list`/`turple`      | `array`  |
| `str`                | `string` |
| `int`/`long`/`float` | `number` |
| `True`               | `true`   |
| `False`              | `false`  |
| `None`               | `null`   |

### Простой пример

Например, вы работаете с каким-либо объектом Python в памяти, который выглядит примерно так:

```python
data = {
	"president": {
		"name": "Putin",
	}
}
```

Эту информацию нужно записать на диск. Например, так:

```python
#!/usr/bin/python3

import json

data = {
	"president": {
		"name": "Putin",
	}
}

# Записываем при помощи контекстного менеджера
with open("some.json", "a") as my_json:
	json.dump(data, my_json)
```

`dump()` принимает два аргумента: объект данных и файл, в который будет записана информация.

### Десериализация

Для десериализации используются функции `load()` и `loads()` (как и в предыдущем примере, вторая для строк).

Для перевода данных из JSON в объекты Python воспользуйтесь таблицей из предыдущего примера.

### Простой пример

```python
#!/usr/bin/python3

import json

with open("some.json", "r") as my_json:
	data = json.load(my_json)

# Выводим какие-либо данные
print(data["name"])

# Через цикл выводим значение массива data["distros"]["linux"]
for distro in data["distros"]["linux"]:
	print(distro)
```
