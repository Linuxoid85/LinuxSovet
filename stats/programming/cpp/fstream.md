# Пример работы с файлами в C++

Рано или поздно у любого человека, пишущего на С++ (да и на другом ЯП) может возникнуть потребность в работе с файлами. Либо писать информацию в них, либо выводить содержимое файла. В данной статье будет рассмотрена работа с библиотекой `fstream`.

## Вывод содержимого текстового файла

Для начала создадим какой-либо текстовый файл:

```bash
cat > file.txt << "EOF"
Пример текстового файла для открытия в программе file_open.cpp

Для работами с файлами используется библиотека fstream, а для
потокового ввода-вывода информации - iostream. Все они подключаются
в начале исходного кода с помощью #include <LIB>.

Используем функцию print_message(), в которой проверяем файл на
наличие (а если быть точным, проверяем файл на возможность
открытия). Если всё впорядке - то через цикл выводим построчно
содержимое файла. Если нет - то выводим сообщение ошибки. Для
его выделения красным цветом используется escape-последовательность
\e[1;31m ... \e[0m.
EOF
```

На самом деле, содержимое файла может быть любым. Запишите нужное между строками:
```bash
cat > file.txt << "EOF"

 ...

EOF
```

Теперь создайте файл с расширением `.cpp`, в котором запишите следующее содержимое:
```c++
/*
 * Проект, демонстрирующий работу с библиотекой fstream
 */
#include <iostream>
#include <fstream>
using namespace std;

// Функция для открытия файла со справкой
void print_text() {
    string line; /*
		  * Объявление переменной line строкового типа,
		  * в которой будет находиться содержимое файла
		  */

    ifstream help("help.txt");
    
    // Проверка на наличие файла
    if (help.is_open()) {
        while (getline(help, line)) {
            cout << line << endl; // Вывод информации из текста
        }
    } else {
        cout << "\a\e[1;31mОШИБКА: файл \e[0m\e[35mhello.txt\e[0m\e[1;31m не существует!\e[0m\n";
        exit(1); // Завершение программы с кодом ошибки 1
    }
    help.close(); // Закрытие файла
}

int main() {
    print_text();
    return 0;
}
```

Собственно, всё понятно по комментариям. Вы могли заметить ненужное объявление функции `print_text()`. Да, можно всё сделать в `main()`, но в будущем программа станет "умнее". В неё добавится ещё несколько функций, а `main()` заметно расширится.

Скомпилируйте программу с помощью `g++`, например так:

```bash
g++ CODE.cpp -o CODE
```

Для запуска выполните:

```bash
./CODE
```

`CODE` замените на нужный файл.

![Пример работы](pic/fstream_prog_1.png)
