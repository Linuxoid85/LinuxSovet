# Выход GNOME 42

GNOME 42 вышел 23 марта 2022 года. В этой версии произошло довольно большое число изменений и улучшений, среди которых можно отметить портирование многих приложений с GTK3 на GTK4 и LibAdwaita, обновление темы Shell, добавление новых страниц параметров в GNOME Control Center и многое другое :)

## Портирование части приложений на GTK4 и LibAdwaita

К сожалению, большинство приложений GNOME, которые входят в минимальную поставку этого рабочего окружения, всё ещё были на GTK3. Среди них можно отметить GNOME Control Center ("Параметры"), Gedit ("Текстовый редактор") и прочие. Gedit был заменён на новый текстовый редактор, а следующие приложения портированы на GTK4 и LibAdwaita:

- GNOME Control Center (Параметры);
- Baobab (Анализатор использования жёстких дисков);
- Погода;
- Часы;
- Калькулятор;
- Расширения (изначально использовали "голый" GTK4);
- Экскурсия;
- Шрифты;
- Символы;
- И другие!

LibAdwaita - новая библиотека GNOME, предназначенная для создания приложений с простым и современным внешним видом. В принципе, сказать более нечего.

Из-за портирования на эту библиотеку у многих приложений изменился внешний вид - он стал действительно современным и стильным.

![](pic/1.png)

![](pic/2.png)

К сожалению, не портированным даже на GTK4 оказался файловый менеджер Nautilus. Да, версия 42.alpha1 была на GTK4 и LibAdwaita, но она была очень нестабильной, да и было много регрессий (не работал darg&drop, копирование в буфер, некорректно отображались иконки файлов, некорректно работал просмотр в виде списка и пр.). Если их исправить - то разработчики просто бы не уложились в поставленные сроки, поэтому было принято решение "откатить" файловый менеджер обратно на GTK3. Зато хоть разработчики обновили т.н. pathbar (панель, где отображается путь до текущей рабочей директории).

![](pic/3.png)

Кроме того, в Nautilus обновили диалог переименования файлов:

![](pic/4.png)

Да, приложения на GTK3 выглядят устаревшими и явно выбиваются из системного стиля. И разработчики GNOME отказались портировать тему Adwaita с GTK4 на GTK3. С одной стороны это плохо - часть приложений GNOME всё ещё на GTK3, и они явно выбиваются из системного стиля. С другой стороны, это подстегнёт разработчиков этого ПО портировать его на GTK4 в кротчайшие сроки.

Обновили тему Shell в соответствии с новой LibAdwaita:

![](pic/5.png)

Кроме того, из панели убрали те закругления.

![](pic/7.png)

## Добавление настроек внешнего вида

![](pic/6.png)

Раньше в программе для изменения параметров гнома была страница "Обои". Теперь же её изменили - добавили настройку сменов стиля (светлый, тёмный), ну и переделали переключалку обоев. Кроме того, если в гноме предоставляются два варианта одних обоев (в светлой и тёмной расцветке), то при изменении стилей меняются и обои ([тыц1](vid/styles.webm), [тыц2](vid/styles2.webm))

Переключалка работает как для GTK3 приложений, предназначенных для GNOME 42 (для более старых версий, увы, не меняет), так и для GTK4 и GTK4 + LibAdwaita. Кроме того, это работает не только для обычных программ, но и для Flatpak, AppImage и, наверное, snap!

Не работает для старых версий GTK3 софта, предназначенного для более старых версий GNOME (например, GNOME Tweaks), Qt и прочего. С одной стороны, это плохо, так как все эти приложения выбиваются из общесистемного стиля, а с другой - это побудит разработчиков бросать устаревшие инструменты и переходить на использование современных (GTK4, LibAdwaita). Кроме того, это создаёт некую экосистему GNOME. Ну и несколько стандартизирует инструменты для создания графического ПО в Linux... В общем - палка о двух концах, например называетца.

![](pic/8.png)

## Замена устаревшего софта на современный и более простой

### 1. Текстовый редактор

Gedit - это текстовый редактор, поставляющийся с GNOME почти с самых первых версий. И он до сих пор на GTK3, да и сам по себе порядком устарел. Его заменили на более современный GNOME Text Editor. Он на GTK4 и LibAdwaita, соответствует GNOME HIG.

![](pic/9.png)

![](pic/10.png)
